{
    "name": "mqtt-connection-target",
    "connectionType": "mqtt",
    "connectionStatus": "open",
    "uri": "tcp://host.docker.internal:1883/",
    "sources": [],
    "targets": [
        {
            "address": "my.sensors.notifications/{{ thing:id }}",
            "topics": [
                "_/_/things/live/messages",
                "_/_/things/live/events"
            ],
            "qos": 0,
            "authorizationContext": [
                "ditto:observer"
            ],
            "headerMapping": {},
            "payloadMapping": [
                "javascript"
            ]
        }
    ],
    "clientCount": 1,
    "failoverEnabled": true,
    "validateCertificates": true,
    "processorPoolSize": 1,
    "mappingDefinitions": {
        "javascript": {
            "mappingEngine": "JavaScript",
            "options": {
                "incomingScript": "function mapToDittoProtocolMsg(headers, textPayload, bytePayload, contentType) {return null;}",
                "outgoingScript": "function mapFromDittoProtocolMsg(namespace, id, group, channel, criterion, action, path, dittoHeaders, value, status, extra) {let textPayload = '{\"temperature\": ' + value.measurements.properties.temperature + ', \"humidity\": ' + value.measurements.properties.humidity + ', \"thingId\": \"' + namespace + ':' + id + '\"}'; let bytePayload = null; let contentType = 'text/plain; charset=UTF-8'; return  Ditto.buildExternalMsg(dittoHeaders, textPayload, bytePayload, contentType);}",
                "loadBytebufferJS": "false",
                "loadLongJS": "false"
            }
        }
    },
    "tags": []
}
